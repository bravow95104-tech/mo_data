<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>éŠæˆ²ç³»çµ± | MoData</title>
    <link rel="stylesheet" href="/mo_data/css/styles.css" />
    <link rel="stylesheet" href="/mo_data/css/system.css" />
</head>
<body>
    <div id="nav-container"></div>
    <script src="/mo_data/js/componentsLoader.js"></script>

    <div id="content-wrapper">
        
        <aside id="sidebar-container" class="system-sidebar">
            <div class="sidebar">
                <h2>éŠæˆ²ç³»çµ±</h2>
                <ul class="sidebar-list" id="system-menu">
                    <li class="active" data-file="newride.html">
                        ã€Œå››è±¡ã€è­œç³»ç«¹é¦¬
                    </li>
                    <li data-file="exp_up.html">
                        ç¶“é©—ç¥ç¦å¡
                    </li>
                    <li data-file="tower.html">
                        ä¸ƒå¯¶ç‰ç’ƒå¡”
                    </li>
                    <li data-file="spirit_card.html">
                        å¼·åŒ–éˆå…·å¡
                    </li>
                    <li data-file="equipment_card.html">
                        å¼·åŒ–è£å‚™å¡
                    </li>
                    <li data-file="seed.html">
                        èŸ æ¡ƒç¨®å­
                    </li>
                    <li data-file="egg.html">
                        è½‰è›‹ç³»çµ±
                    </li>
                    <li data-file="city.html">
                        åŸå¯¨æ”»åŸ
                    </li>
                    <li data-file="marry.html">
                        çµå©šç³»çµ±
                    </li>
                    <li data-file="family.html">
                        å®¶æ—ç³»çµ±
                    </li>
                    <li data-file="command.html">
                        æƒ…æ„ŸæŒ‡ä»¤
                    </li>
                </ul>
            </div>
        </aside>

        <section id="content">
            <div id="dynamic-content">
                <div class="loading-text">æ­£åœ¨è¼‰å…¥ç³»çµ±å…§å®¹...</div>
            </div>
        </section>

    </div>

    <button id="backToTop" title="å›åˆ°é ‚éƒ¨">â–²</button>

    <div id="footer-container"></div>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const menuItems = document.querySelectorAll('#system-menu li');
            const contentDisplay = document.getElementById('dynamic-content');

            // è¼‰å…¥å…§å®¹çš„å‡½å¼
            function loadSystemPage(fileName) {
                // é€™è£¡çš„è·¯å¾‘è«‹ç¢ºä¿èˆ‡ä½ çš„è³‡æ–™å¤¾çµæ§‹ä¸€è‡´ (ä¾‹å¦‚æ”¾åœ¨ /mo_data/pages/ åº•ä¸‹)
                fetch(`/mo_data/sys/${fileName}`)
                    .then(response => {
                        if (!response.ok) throw new Error('æ‰¾ä¸åˆ°å…§å®¹æª”æ¡ˆ');
                        return response.text();
                    })
                    .then(html => {
                        contentDisplay.innerHTML = html;
                        // ğŸŒŸ å¦‚æœä½ çš„å­é é¢è£¡æœ‰è¡¨æ ¼ï¼Œä¸”éœ€è¦ç”¨åˆ°ä¹‹å‰çš„ã€Œæ’åºç®­é ­ã€é‚è¼¯
                        // å¯ä»¥åœ¨é€™è£¡å‘¼å« reInitTableSort();
                    })
                    .catch(error => {
                        contentDisplay.innerHTML = `<h3 class="search-tip">éŒ¯èª¤ï¼šç„¡æ³•è®€å–å…§å®¹ (${fileName})</h3>`;
                    });
            }

            // é¸å–®é»æ“Šäº‹ä»¶
            menuItems.forEach(item => {
                item.addEventListener('click', () => {
                    // 1. åˆ‡æ› active æ¨£å¼
                    menuItems.forEach(i => i.classList.remove('active'));
                    item.classList.add('active');

                    // 2. åŸ·è¡Œè¼‰å…¥
                    const file = item.getAttribute('data-file');
                    loadSystemPage(file);
                });
            });

            // åˆå§‹è¼‰å…¥ç¬¬ä¸€é …å…§å®¹
            loadSystemPage('newride.html');
        });
    </script>
</body>
</html>