<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <title>åœ°åœ– | MoData</title>
    <link rel="stylesheet" href="/mo_data/css/styles.css" />
    <link rel="stylesheet" href="/mo_data/css/map.css" />
    <style>
      /* === å¤–æ¡† === */
      #maparea {
        max-width: 900px;
        margin: 40px auto;
        background: white;
        border-radius: 10px;
        padding: 20px 30px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      }

      #maparea h2 {
        font-size: 1.6rem;
        margin-bottom: 20px;
        border-bottom: 2px solid #3399ff;
        padding-bottom: 8px;
        color: #267acc;
        text-align: center;
      }

      /* === åœ°åœ–å®¹å™¨ === */
      .map-container {
        width: 100%;
        height: 600px;
        overflow: hidden;
        position: relative;
        border-radius: 10px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
        cursor: grab;
        background-color: #f0f0f0;
      }

      .map-container:active {
        cursor: grabbing;
      }

      /* === åœ°åœ–åœ–ç‰‡ === */
      .map-image {
        position: absolute;
        top: 0;
        left: 0;
        transform-origin: center center;
        transition: transform 0.05s linear;
        user-select: none;
        -webkit-user-drag: none;
      }

      /* å°æç¤º */
      .map-tip {
        text-align: center;
        font-size: 0.9rem;
        color: #666;
        margin-top: 8px;
      }
    </style>
  </head>

  <body>
    <div id="nav-container"></div>
    <script src="/mo_data/js/componentsLoader.js"></script>

    <div id="content">
      <h1></h1>

      <section id="maparea">
        <h2>ğŸ—ºï¸ éŠæˆ²åœ°åœ–ï¼ˆå¯ç¸®æ”¾èˆ‡æ‹–æ›³ï¼‰</h2>
        <div class="map-container" id="mapContainer">
          <img
            id="mapImage"
            src="/mo_data/pic/map/map.png"
            alt="éŠæˆ²åœ°åœ–"
            class="map-image"
          />
        </div>
        <p class="map-tip">æ»‘é¼ æ»¾è¼ªç¸®æ”¾ï¼Œæ‹–æ›³å¯ç§»å‹•åœ°åœ–</p>
      </section>
    </div>

    <div id="footer-container"></div>

    <script>
      const mapImg = document.getElementById("mapImage");
      const mapContainer = document.getElementById("mapContainer");

      // === åˆå§‹ç‹€æ…‹ ===
      let scale = 1;
      let posX = 0;
      let posY = 0;
      let isDragging = false;
      let startX, startY;

      // === æ»¾è¼ªç¸®æ”¾ ===
      mapContainer.addEventListener("wheel", (e) => {
        e.preventDefault();
        const zoomSpeed = 0.1;
        const delta = e.deltaY > 0 ? -zoomSpeed : zoomSpeed;

        scale = Math.min(Math.max(scale + delta, 0.5), 4); // é™åˆ¶ç¸®æ”¾ç¯„åœ 0.5~4
        updateTransform();
      });

      // === æ‹–æ›³åœ°åœ– ===
      mapContainer.addEventListener("mousedown", (e) => {
        isDragging = true;
        startX = e.clientX - posX;
        startY = e.clientY - posY;
        mapContainer.style.cursor = "grabbing";
      });

      document.addEventListener("mouseup", () => {
        isDragging = false;
        mapContainer.style.cursor = "grab";
      });

      document.addEventListener("mousemove", (e) => {
        if (!isDragging) return;
        posX = e.clientX - startX;
        posY = e.clientY - startY;
        updateTransform();
      });

      // === æ‰‹æ©Ÿæ”¯æ´è§¸æ§æ‹–æ›³ ===
      mapContainer.addEventListener("touchstart", (e) => {
        if (e.touches.length === 1) {
          isDragging = true;
          startX = e.touches[0].clientX - posX;
          startY = e.touches[0].clientY - posY;
        }
      });

      mapContainer.addEventListener("touchmove", (e) => {
        if (isDragging && e.touches.length === 1) {
          posX = e.touches[0].clientX - startX;
          posY = e.touches[0].clientY - startY;
          updateTransform();
        }
      });

      mapContainer.addEventListener("touchend", () => {
        isDragging = false;
      });

      // === æ›´æ–°åœ°åœ–è®Šæ› ===
      function updateTransform() {
        mapImg.style.transform = `translate(${posX}px, ${posY}px) scale(${scale})`;
      }
    </script>
    <div id="footer-container"></div><!-- é€™æ˜¯é å°¾æœƒè¢«è¼‰å…¥çš„ä½ç½® -->
  </body>
</html>